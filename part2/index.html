<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Me</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" href="./Designer.png" type="image/png">
</head>
    <header>
        <h1>A Test Page by Marm, pt 2</h1>
    </header>
<body>
	<p>Yes. Yes. It's true. This is part two. Part two, electric boogaloo, even. Indeed.</p>
	<a href="https://marvelousmarmalade.github.io/WhorldWhideWheb/">
	<button class="custom-button">I'm too young to die! Take me back!</button>
	</a>
	<br></br>


	<input type="text" id="coords" name="coords" class="text-input">Input stuff here</input> <!--input text boxes for latitude and Longitude-->
	<br></br>
	<button id="getWeather" class="custom-button" onclick="fetchData();">Fetch Temperature</button> <!-- button for starting the function -->
	<p>Temperature:</p>
	<div id="dynamic-text">N/A</div>
	<p>My comrade-in-knowledge, <a href="url">Dr. Spectacles</a>, is in desperate need of excitement. I implore you to bring divers implements of vandalism to his realm, and ensure that he does not grow impotent.</p>
    <script>
	        // Function to fetch data from the API
        async function fetchData() {
				var coords = document.getElementById("coords").value; // gets latitude and longitudes from the input text boxes
				console.log(coords);
				try{
                var response = await fetch(`https://api.weather.gov/points/${coords}`);
				var metaData = await response.json();
				
                var forecasturl = metaData.properties.forecastHourly;
				
				var forecastN = await fetch(forecasturl);
				var forecast = await forecastN.json();
				
				console.log(forecast.properties.generatedAt);
				let temp = forecast.properties.periods[0].temperature;
				console.log(temp);
				document.getElementById("dynamic-text").textContent = temp;
				}
				catch (error) {
				document.getElementById("dynamic-text").textContent = "Error has occured! Are your coordinates formatted as {latitude},{longitude}?";
				}

				return(forecast);
        }
		</script>
</body>
